---
title: Form
description: Detailed documentation for the Form model in our application.
---

# Form Model Documentation

The `Form` model represents a dynamic form within the application, supporting various types of forms and configurations. It is highly flexible and allows for polymorphic relationships, custom themes, and deep associations with form pages and questions.

## Table of Contents

- [Schema Information](#schema-information)
- [Relationships](#relationships)
- [Enums](#enums)
- [Scopes](#scopes)
- [Nested Attributes](#nested-attributes)
- [Instance Methods](#instance-methods)
  - [can_be_published](#can_be_published)
  - [sorted_form_questions](#sorted_form_questions)
  - [search_data](#search_data)
  - [scores](#scores)
  - [duplicate](#duplicate)

## Schema Information

<TypeTable
  type={{
    id: {
      description: 'Primary key for the form',
      type: 'integer',
      default: 'Auto-increment',
    },
    workspace_app_id: {
      description: 'ID of the associated workspace app',
      type: 'bigint',
      default: 'None',
    },
    workspace_id: {
      description: 'ID of the workspace associated with the form',
      type: 'bigint',
      default: 'None',
    },
    list_id: {
      description: 'ID of the list associated with the form',
      type: 'bigint',
      default: 'None',
    },
    legacy_id: {
      description: 'Legacy form ID (for backwards compatibility)',
      type: 'integer',
      default: 'None',
    },
    formable_id: {
      description: 'Polymorphic association ID for the formable object',
      type: 'integer',
      default: 'None',
    },
    formable_type: {
      description: 'Polymorphic association type for the formable object',
      type: 'string(255)',
      default: 'None',
    },
    formable_kind: {
      description: 'Specifies the kind of the formable object',
      type: 'string(191)',
      default: 'None',
    },
    theme_id: {
      description: 'ID of the associated theme for the form',
      type: 'bigint',
      default: 'None',
    },
    kind: {
      description:
        'Specifies the type of form (classic, one_by_one, conversational)',
      type: 'integer',
      default: 'classic (0)',
    },
    data_collection_kind: {
      description:
        'Defines how data is collected (anyone, authenticated users, etc.)',
      type: 'integer',
      default: 'anyone (0)',
    },
    name: {
      description: 'Name of the form',
      type: 'text(65535)',
      default: 'None',
    },
    description: {
      description: 'Detailed description of the form',
      type: 'text(16777215)',
      default: 'None',
    },
    cover_data: {
      description: 'JSON object for the cover data of the form',
      type: 'json',
      default: 'None',
    },
    begins_at: {
      description: 'Datetime when the form becomes active',
      type: 'datetime',
      default: 'None',
    },
    finishes_at: {
      description: 'Datetime when the form becomes inactive',
      type: 'datetime',
      default: 'None',
    },
    preferences: {
      description: 'JSON object for form-specific preferences',
      type: 'json',
      default: 'None',
    },
    published_at: {
      description: 'Datetime when the form was published',
      type: 'datetime',
      default: 'None',
    },
    created_at: {
      description: 'Timestamp when the form was created',
      type: 'datetime',
      default: 'Auto-generated',
    },
    updated_at: {
      description: 'Timestamp when the form was last updated',
      type: 'datetime',
      default: 'Auto-generated',
    },
    archived_at: {
      description: 'Datetime when the form was archived',
      type: 'datetime',
      default: 'None',
    },
    discarded_at: {
      description: 'Datetime when the form was discarded',
      type: 'datetime',
      default: 'None',
    },
  }}
/>

## Relationships

The `Form` model establishes several relationships to other models:

- **Workspace**:
  - A `Form` belongs to a `Workspace`.
  - `belongs_to :workspace`
- **Polymorphic Formable**:
  - The form can belong to different types of models using a polymorphic relationship (`formable`).
  - `belongs_to :formable, polymorphic: true, optional: true`
- **Theme**:

  - A `Form` optionally belongs to a `Theme`.
  - `belongs_to :theme, optional: true`

- **Form Responses**:
  - A `Form` can have many form responses.
  - `has_many :form_responses, dependent: :destroy`
- **Form Pages**:
  - A `Form` has many form pages, and they are ordered by position.
  - `has_many :form_pages, -> { order(position: :asc) }, dependent: :destroy`
- **Form Questions**:
  - A `Form` has many questions through its pages.
  - `has_many :form_questions, through: :form_pages`

## Enums

The `Form` model supports the following enums:

- **kind**: Defines the type of form. Supported values are:

  - `classic`: Default form type (0)
  - `one_by_one`: One-by-one question form (1)
  - `conversational`: Conversational form (2)

- **data_collection_kind**: Defines the data collection strategy. Supported values are:
  - `anyone`: Anyone can fill the form (0)
  - `only_authenticated`: Only authenticated users can fill the form (1)
  - `only_not_authenticated`: Only non-authenticated users can fill the form (2)

## Scopes

- **pure**: Returns forms without a polymorphic `formable_type`.
  ```ruby
  scope :pure, -> { where(formable_type: nil) }
  ```
